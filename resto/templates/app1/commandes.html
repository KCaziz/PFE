{% extends 'base.html' %}

{% block content %}
<center>
    <h2>
        voici votre historique des commandes {{user.name}}
    </h2>
    <table style="width: 90%; margin: 20px;">
        <thead>
          <tr style="border: 1px solid #999;">
            <th style="padding: 10px;">Produit</th>
            <th style="padding: 10px;">Prix unitaire</th>
            <th style="padding: 10px;">Quantité</th>
            <th style="padding: 10px;">Statut</th>
            <th style="padding: 10px;">Livraison</th>
            <th style="padding: 10px;">Date</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
          <tr style="{% if order.ordered and order.processed %}background-color: #49E926;{% elif not order.ordered %}background-color: #F43006;{% else %}background-color: #F1F812;{% endif %} border: 1px solid #999;">
            <td style="padding: 10px;">{{ order.product.name }}</td>
            <td style="padding: 10px;">{{ order.product.price }}</td>
            <td style="padding: 10px;">{{ order.quantity }}</td>
            <td style="padding: 10px;">{% if order.ordered %}{% if order.processed %}Commandé et traité{% else %}Commandé mais non traité{% endif %}{% else %}Non commandé{% endif %}</td>
            <td style="padding: 10px;">
              {% if order.delivery %} A livrer 
              {% for livraison in livraisons %}
              {% if order in livraison.order.all %}
              {%if livraison.delivered %}
              (en cours)
              {%else%}
              (traitement)
              {%endif%}
              {%endif%}
              {%endfor%}
              {% else %} sur place {% endif %}</td>
            <td style="padding: 10px;">{{ order.ordered_date }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      
</center>
{% endblock %}